## rpi0_ws2812b
----------------------------------------------------

### Files :
- rpi0_ws2812b
	- app.py --------------------- 执行文件
	- ws2812b.py -------------- ws2812b灯串驱动
	- README.md ------------ 说明文档


### Python Version : 
- V3.7.x


### Description :
- 通过Raspberry Pi zero W 控制 ws2812b 显示
- 通过MQTT实现开关机、显示效果切换等功能
- 通过GIT实现自动在线更新

### Install & Run:
- Dependency:
    - paho-mqtt
    - neopixel
    - numpy

### MQTT - API:

- SystemControl：系统控制：
    - 控制列表如下：
|   功能   |  指令  |
| :------: | :----: |
|  开机  |  "PowerON" |
|  定时开机1  |  "PowerON -t (hh:mm:ss)" |
|  定时开机2  |  "PowerON -h (h)" |
|  关机  |  "PowerOFF" |
|  定时关机1  |  "PowerOFF -t (hh:mm:ss)" |
|  定时关机2  |  "PowerOFF -h (h)" |
    - P.S.
        - 定时功能1都需要联网校对时间，否则出现错误，括号中为时分秒时间格式
        - 定时功能2表示在设定小时后执行，单位为小时
```
{
	"Lightness":0.8,           # 控制灯串亮度，范围 0 ~ 1，空缺则保持不变
	"Command":"SystemControl", # 控制模式选择
	"Value":"PowerON"          # 控制指令
}
```
- Mode0：通过灯珠编号独立控制每一个灯珠，示例演示控制第0个灯珠和第一个灯珠的控制方式，其他灯珠以此类推：
```
{
	"Lightness":0.8,           # 控制灯串亮度，范围 0 ~ 1，空缺则保持不变
	"Command":"Mode0",         # 控制模式选择
	"Value":{                  # 模式0时的参数，空缺则保持不变
		"0":{                  # 第0个灯珠
			"R":255,           # 红光
			"G":0,             # 绿光
			"B":0              # 蓝光
		},
		"1":{                  # 第1个灯珠
			"R":0,             # 红光
			"G":255,           # 绿光
			"B":0              # 蓝光
		}
	}
}
```
- Mode1：显示字符串，由于使用3x5的字体，所以部分字符无法显示：
```
{
	"Lightness":0.8,           # 控制灯串亮度，范围 0 ~ 1，空缺则保持不变
	"Command":"Mode1",         # 控制模式选择
	"Value":"hello"            # 参数为需要显示的字符串
}
```
- Mode2：控制显示预置的灯串演示效果：
    - 效果列表如下：
|   指令   |  效果  |
| :------: | :----: |
|  effect01 -r 255 -g 0 -b 0 -t 100 |  显示滚动字符串“hello”, 参数-r -g -b为颜色值，空缺则显示随机颜色， 参数-t为滚动间隔时间，单位为ms |
|  effect02 -r 0 -g 255 -b 0 -t 40 |  随机位置灯珠显示随机颜色，参数-r -g -b为颜色值，空缺则显示随机颜色， 参数-t为显示间隔时间，单位为ms |
|  effect03 -r 0 -g 0 -b 255 -t 10 |  逐行刷新显示一种颜色，参数-r -g -b为颜色值，空缺则显示随机颜色， 参数-t为显示间隔时间，单位为ms |
```
{
	"Lightness":0.8,                              # 控制灯串亮度，范围 0 ~ 1，空缺则保持不变
	"Command":"Mode2",                            # 控制模式选择
	"Value":"effect01 -r 255 -g 0 -b 0 -t 100"    # 参数为预置效果编号
}
```
### Change Log:

- 2019.05.06：
    - 新增对MQTT通讯的支持
    - 新增说明文档


**Author**         : Jackie Yang  
**Email**          : czyangyinghao@163.com  
**Date**           : 06/05/2019
